<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>

    <h2>获取服务器更新</h2>
    <div id="result"></div>

    <script>
        if (!!window.EventSource) {
            var source = new EventSource("/stream-data");

            source.onmessage = function (e) {
                document.getElementById("result").innerHTML += e.data + "<br>";
            };

            source.onerror = function (e) {
                source.close();
                console.error("EventSource failed:", e);
            };
        } else {
            document.getElementById("result").innerHTML = "抱歉，你的浏览器不支持 server-sent events...";
        }  
    </script>

</body>

</html>